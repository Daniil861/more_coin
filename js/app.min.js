(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".main")&&(+sessionStorage.getItem("money")>=50?(document.querySelector(".block-bet__coins").textContent=50,sessionStorage.setItem("current-bet",50)):(document.querySelector(".block-bet__coins").textContent=0,sessionStorage.setItem("current-bet",0)));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");function s(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.contains(t)&&e.classList.remove(t)}))}function n(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function r(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function c(e,t){return Math.floor(Math.random()*(t-e)+e)}let a=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=c(0,3),t=["jump","scale","rotate"],o=c(0,a.length);a.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{a[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4);const i={program:1},m=1e5,l=2e5;function u(){document.querySelectorAll(".pets__item").forEach((e=>{e.classList.contains("_selected")&&e.classList.remove("_selected")}));let e=+sessionStorage.getItem("current-pet")-1;document.querySelectorAll(".pets__item")[e].classList.add("_selected"),0==e?(document.querySelector(".main__image-chick img").setAttribute("src","img/other/chick.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(-180deg)"):1==e?(document.querySelector(".main__image-chick img").setAttribute("src","img/other/wolf.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(0deg)"):2==e&&(document.querySelector(".main__image-chick img").setAttribute("src","img/other/fairy.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(0deg)")}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),sessionStorage.getItem("training-complete")&&(document.querySelector(".training").remove(),document.querySelector(".main").classList.remove("_hide"))),document.querySelector(".main")&&(sessionStorage.getItem("current-pet")||sessionStorage.setItem("current-pet",1),sessionStorage.getItem("pet")||sessionStorage.setItem("pet",1),u());const d={hero:document.querySelector(".game__hero"),ground_bottom:-100,window_width:document.documentElement.clientWidth,stars:0,count_win:0,timerGround:!1,timerCheckGameOver:!1,timerCheckStars:!1,loose:!1,timerGroundCreate:!1};function _(e,t,o){let s=t,n=document.createElement("div");n.classList.add("game__ground"),n.style.left=`${t}%`,n.style.bottom=`${d.ground_bottom}px`,n.style.zIndex="2";let r=document.createElement("img");r.setAttribute("src",`img/other/ground-${e}.png`),n.append(r),document.querySelector(".game__grounds").append(n),1==o&&(setTimeout((()=>{setInterval((()=>{s--,n.style.left=`${s}%`}),50)}),3500),setTimeout((()=>{n.remove()}),1e4))}function g(e){d.window_width<=600?_(1,3,e):d.window_width>600&&d.window_width<=700?(_(1,3,e),_(2,90,e)):d.window_width>700&&d.window_width<=900?(_(1,3,e),_(2,80,e)):d.window_width>900&&d.window_width<=1100?(_(1,3,e),_(1,70,e)):d.window_width>1100&&(_(1,3,e),_(1,60,e))}function p(){let e=document.createElement("div");e.classList.add("game__star");let t=document.createElement("img");return t.setAttribute("src","img/other/star.png"),e.append(t),e}function y(){let e=document.createElement("div");e.classList.add("_check_coins"),document.querySelector(".game__hero").append(e),setTimeout((()=>{e.remove()}),50);let t=e.getBoundingClientRect().left+6,o=e.getBoundingClientRect().top,s=document.elementFromPoint(t,o);var n;s.closest(".game__star")&&((n=s.closest(".game__star")).classList.add("_hide"),d.stars=d.stars+1,setTimeout((()=>{document.querySelector(".stars-header__value").textContent=d.stars,n.remove()}),1e3))}function S(){let e=document.createElement("div");e.classList.add("_chek_over"),document.querySelector(".wrapper").append(e),setTimeout((()=>{e.remove()}),50);let t=e.getBoundingClientRect().left+6,o=e.getBoundingClientRect().top;if(!document.elementFromPoint(t,o).closest(".game__ground")){if(d.loose)return;d.loose=!0,document.querySelector(".game__hero").classList.add("_jump-down"),document.querySelector(".game__hero").classList.add("_hide"),h(),function(){let e=+sessionStorage.getItem("current-bet"),t=+sessionStorage.getItem("coeff");d.stars>=5&&d.stars<10?d.count_win=e*t:d.stars>=10&&d.stars<15?d.count_win=2*e*t:d.stars>=15&&d.stars<20?d.count_win=3*e*t:d.stars>=20&&d.stars<25?d.count_win=5*e*t:d.stars>=25&&d.stars<35?d.count_win=10*e*t:d.stars>=35&&d.stars<50?d.count_win=20*e*t:d.stars>=50&&(d.count_win=50*e*t)}(),d.stars>=120&&!sessionStorage.getItem("character-3")?sessionStorage.setItem("character-3",!0):d.stars>=80&&!sessionStorage.getItem("character-2")&&sessionStorage.setItem("character-2",!0),d.count_win>0?(document.querySelector(".box-training__count-coins").textContent=`+${d.count_win}`,setTimeout((()=>{!function(e,t,o,s){let n=+sessionStorage.getItem("money")+e;setTimeout((()=>{sessionStorage.setItem("money",n),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(+d.count_win,".check")}),1e3)):document.querySelector(".box-training__count-coins").textContent=0,document.querySelectorAll(".box-training__count-stars").forEach((e=>e.textContent=d.stars)),setTimeout((()=>{document.querySelector(".gameover").classList.add("_active"),document.querySelector(".wrapper").classList.remove("_anim-bg")}),1e3)}}function h(){!function(e){for(var t=Math.max(e.setInterval((function(){}),1e3));t--;)e.clearInterval(t)}(window)}function b(){f(),g(1),n(+sessionStorage.getItem("current-bet"),".check"),setTimeout((()=>{L(),document.querySelector(".wrapper").classList.add("_anim-bg"),document.querySelector(".game__icon").classList.add("_anim"),document.querySelector(".game__hero").classList.add("_active"),document.querySelector(".game__button-jump").classList.remove("_hold"),q(),v()}),3500)}function q(){d.timerCheckGameOver=setInterval((()=>{d.loose?clearInterval(d.timerCheckGameOver):S()}),10)}function v(){d.loose||(d.timerCheckStars=setInterval((()=>{d.loose?clearInterval(d.timerCheckStars):y()}),10))}function L(){d.timerGroundCreate=setInterval((()=>{(function(e,t){let o=document.querySelector(e),s=o.getBoundingClientRect().left+t,n=o.getBoundingClientRect().top-3;return document.elementFromPoint(s,n)})(".pin_2",5).closest(".game__ground")||function(){let e=[1,1,1,2,3,4],t=d.stars,o=c(0,6),s=[],n=0;t<10?(s=[1,2,3],n=c(0,3)):t>=10&&t<20?(s=[0,1,2,3],n=c(0,4)):t>=20&&(s=[0,0,1,1,2,3],n=c(0,6));let r=100,a=document.createElement("div");a.classList.add("game__ground"),a.style.left=`${r}%`,a.style.bottom=`${d.ground_bottom}px`;let i=document.createElement("img");i.setAttribute("src",`img/other/ground-${e[o]}.png`),a.append(i);let m=[p(),p(),p()],l=[c(30,70),c(0,25),c(30,55),c(60,90)];0==s[n]?(d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50),document.querySelector(".game__grounds").append(a),setTimeout((()=>{a.remove()}),1e4)):1==s[n]?(1==e[o]?(m[0].style.left=`${l[0]}%`,m[0].style.top="0px",a.append(m[0]),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50)):2!=e[o]&&3!=e[o]&&4!=e[o]||(m[0].style.left=`${l[0]}%`,m[0].style.top="0px",a.append(m[0]),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50)),document.querySelector(".game__grounds").append(a),setTimeout((()=>{a.remove()}),1e4)):2==s[n]?1==e[o]?(m[0].style.left=`${l[1]}%`,m[0].style.top="0px",m[1].style.left=`${l[3]}%`,m[1].style.top="$0px",a.append(m[0],m[1]),document.querySelector(".game__grounds").append(a),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50),setTimeout((()=>{a.remove()}),1e4)):2!=e[o]&&3!=e[o]&&4!=e[o]||(m[0].style.left=`${l[0]}%`,m[0].style.top="0px",a.append(m[0]),document.querySelector(".game__grounds").append(a),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50),setTimeout((()=>{a.remove()}),1e4)):3==s[n]&&(1==e[o]?(m[0].style.left=`${l[1]}%`,m[0].style.top="0px",m[1].style.left=`${l[2]}%`,m[1].style.top="0px",m[2].style.left=`${l[3]}%`,m[2].style.top="0px",a.append(m[0],m[1],m[2]),document.querySelector(".game__grounds").append(a),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50),setTimeout((()=>{a.remove()}),1e4)):2!=e[o]&&3!=e[o]&&4!=e[o]||(m[0].style.left=`${l[0]}%`,m[0].style.top="0px",a.append(m[0]),document.querySelector(".game__grounds").append(a),d.timerGround=setInterval((()=>{r--,a.style.left=`${r}%`}),50),setTimeout((()=>{a.remove()}),1e4)))}()}),600)}function f(){setTimeout((()=>{document.querySelector(".timer").classList.add("_active"),function(){let e=3;document.querySelector(".timer__count").textContent=e;let t=setInterval((()=>{0==e&&clearInterval(t),e--,document.querySelector(".timer__count").textContent=e}),1e3)}()}),500)}document.addEventListener("click",(e=>{let c=e.target,a=+sessionStorage.getItem("current-bet"),_=+sessionStorage.getItem("money");if(c.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active")),c.closest(".block-bet__minus")&&a>50&&(sessionStorage.setItem("current-bet",a-50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),c.closest(".block-bet__plus")&&(_-49>a?(sessionStorage.setItem("current-bet",a+50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):r(".check")),c.closest(".block-bet__min")&&(+sessionStorage.getItem("money")>=50?(sessionStorage.setItem("current-bet",50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):r(".check")),c.closest(".block-bet__max")&&(+sessionStorage.getItem("money")>=50?(sessionStorage.setItem("current-bet",+sessionStorage.getItem("money")),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):r(".check")),c.closest(".box-training__button")&&1==i.program&&document.querySelector(".training")){setTimeout((()=>{i.program=2}),100),document.querySelector(".box-training__bg-text").textContent="pet",document.querySelector(".item-training__text p").textContent="Animals can be bought for coins",document.querySelector(".block-bet").remove();let e=function(){let e=document.createElement("div");e.classList.add("box-training__pets"),e.classList.add("pets");let t=document.createElement("div");t.classList.add("pets__body");let o=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div");o.classList.add("pets__item"),s.classList.add("pets__item"),n.classList.add("pets__item"),s.classList.add("_hide"),n.classList.add("_hide");let r=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div");r.classList.add("pets__item-body"),c.classList.add("pets__item-body"),a.classList.add("pets__item-body");let i=document.createElement("div"),m=document.createElement("div"),l=document.createElement("div");i.classList.add("pets__image"),m.classList.add("pets__image"),l.classList.add("pets__image");let u=document.createElement("img"),d=document.createElement("img"),_=document.createElement("img");u.setAttribute("src","img/other/chick.png"),d.setAttribute("src","img/other/wolf.png"),_.setAttribute("src","img/other/fairy.png"),i.append(u),m.append(d),l.append(_);let g=document.createElement("div"),p=document.createElement("div"),y=document.createElement("div");g.classList.add("pets__coeff"),p.classList.add("pets__coeff"),y.classList.add("pets__coeff"),g.textContent="x1.5",p.textContent="x1.8",y.textContent="x2.0";let S=document.createElement("div"),h=document.createElement("div"),b=document.createElement("div");S.classList.add("pets__icon"),h.classList.add("pets__icon"),b.classList.add("pets__icon");let q=document.createElement("img"),v=document.createElement("img"),L=document.createElement("img");q.setAttribute("src","img/icons/btn-ok.png"),v.setAttribute("src","img/icons/btn-ok.png"),L.setAttribute("src","img/icons/btn-ok.png"),S.append(q),h.append(v),b.append(L);let f=document.createElement("div"),I=document.createElement("div");f.classList.add("pets__text"),I.classList.add("pets__text"),f.classList.add("_hide"),I.classList.add("_hide"),f.textContent="Collect 80 stars\tin one game",I.textContent="Collect 120 stars\tin one game";let x=document.createElement("div"),w=document.createElement("div");x.classList.add("pets__sub-text"),x.classList.add("pets__sub-text_training"),w.classList.add("pets__sub-text"),w.classList.add("pets__sub-text_training");let E=document.createElement("img"),A=document.createElement("img");E.setAttribute("src","img/icons/coin.png"),A.setAttribute("src","img/icons/coin.png");let k=document.createElement("div"),C=document.createElement("div");return k.classList.add("pets__price"),C.classList.add("pets__price"),k.textContent="100k",C.textContent="200k",x.append(E,k),w.append(A,C),r.append(i,g,S),c.append(m,p,h,x,f),a.append(l,y,b,w,I),o.append(r),s.append(c),n.append(a),t.append(o,s,n),e.append(t),e}();document.querySelector(".box-training__image").append(e)}c.closest(".box-training__button")&&2==i.program&&document.querySelector(".training")&&(setTimeout((()=>{i.program=3}),100),document.querySelector(".item-training__text p").textContent="To get more pets - complete tasks",document.querySelectorAll(".pets__sub-text_training").forEach((e=>e.remove())),document.querySelectorAll(".pets__text").forEach((e=>{e.classList.contains("_hide")&&e.classList.remove("_hide")}))),c.closest(".box-training__button")&&3==i.program&&document.querySelector(".training")&&(document.querySelector(".control-training__button-jump").classList.add("_active"),document.querySelector(".character-training__body").classList.add("_active"),document.querySelector(".item-training__body").remove()),c.closest(".character-training__button")&&(sessionStorage.setItem("training-complete",!0),document.querySelector(".training").classList.add("_anim"),document.querySelector(".main").classList.remove("_hide"),i.program=1,setTimeout((()=>{document.querySelector(".training").remove()}),2e3)),c.closest(".control-training__button-jump")&&document.querySelector(".control-training__button-jump").classList.contains("_active")&&document.querySelector(".control-training__button-jump").classList.remove("_active"),c.closest(".button-pets")&&(document.querySelector(".button-pets").classList.add("_hide"),document.querySelector(".box-training__bg-text").textContent="pet",document.querySelector(".block-bet").classList.add("_hide"),document.querySelector(".pets").classList.remove("_hide"),document.querySelector(".box-training__button-back").classList.remove("_hide"),u(),sessionStorage.getItem("character-2")&&document.querySelectorAll(".pets__item")[1].classList.remove("_hide"),sessionStorage.getItem("character-3")&&document.querySelectorAll(".pets__item")[2].classList.remove("_hide")),c.closest(".box-training__button-back")&&(document.querySelector(".box-training__button-back").classList.add("_hide"),document.querySelector(".pets").classList.add("_hide"),document.querySelector(".block-bet").classList.remove("_hide"),document.querySelector(".box-training__bg-text").textContent="bet",document.querySelector(".button-pets").classList.remove("_hide")),c.closest(".pets__item")&&1==c.closest(".pets__item").dataset.character&&(s(".pets__item","_active"),c.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",1)),c.closest(".pets__item")&&2==c.closest(".pets__item").dataset.character&&(sessionStorage.getItem("character-2")?(s(".pets__item","_active"),c.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",2)):+sessionStorage.getItem("money")>=m?(n(m,".check"),sessionStorage.setItem("character-2",!0),c.closest(".pets__item").classList.remove("_hide")):+sessionStorage.getItem("money")<m&&r(".check")),c.closest(".pets__item")&&3==c.closest(".pets__item").dataset.character&&(sessionStorage.getItem("character-3")?(s(".pets__item","_active"),c.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",3)):+sessionStorage.getItem("money")>=l?(n(l,".check"),sessionStorage.setItem("character-3",!0),c.closest(".pets__item").classList.remove("_hide")):+sessionStorage.getItem("money")<l&&r(".check")),c.closest(".box-training__button-ok")&&!document.querySelector(".training")&&document.querySelector(".main__button-pets").classList.contains("_hide")&&(sessionStorage.setItem("current-pet",sessionStorage.getItem("pet")),u()),!c.closest(".box-training__button-ok")||document.querySelector(".training")||document.querySelector(".main__button-pets").classList.contains("_hide")||(document.querySelector(".main").classList.add("_hide"),document.querySelector(".game").classList.remove("_hide"),document.querySelector(".bet").textContent=sessionStorage.getItem("current-bet"),function(){let e=+sessionStorage.getItem("current-pet");1==e?(document.querySelector(".pet-header__icon img").setAttribute("src","img/other/chick.png"),document.querySelector(".pet-header__icon img").style.transform="rotateY(-180deg)",sessionStorage.setItem("coeff",1.5)):2==e?(document.querySelector(".pet-header__icon img").setAttribute("src","img/other/wolf.png"),document.querySelector(".pet-header__icon img").style.transform="rotateY(0deg)",document.querySelector(".pet-header__coeff").textContent="1.8",document.querySelector(".game__icon img").setAttribute("src","img/other/wolf.png"),document.querySelector(".game__icon img").style.transform="rotateY(0deg)",sessionStorage.setItem("coeff",1.8)):3==e&&(document.querySelector(".pet-header__icon img").setAttribute("src","img/other/fairy.png"),document.querySelector(".pet-header__icon img").style.transform="rotateY(0deg)",document.querySelector(".pet-header__coeff").textContent="2.0",document.querySelector(".game__icon img").setAttribute("src","img/other/fairy.png"),document.querySelector(".game__icon img").style.transform="rotateY(0deg)",sessionStorage.setItem("coeff",2))}(),b()),c.closest(".box-training__button-ok")&&document.querySelector(".game__pause").classList.contains("_active")&&(document.querySelector(".game__ground")&&document.querySelectorAll(".game__ground").forEach((e=>e.remove())),g(1),f(),setTimeout((()=>{L(),document.querySelector(".wrapper").classList.add("_anim-bg"),document.querySelector(".game__hero").classList.add("_active"),q(),v()}),3500),document.querySelector(".game__pause").classList.remove("_active")),c.closest(".game__button-jump")&&(document.querySelector(".game__hero").classList.add("_jump"),setTimeout((()=>{document.querySelector(".game__hero").classList.remove("_jump")}),600),document.querySelector(".game__button-jump").classList.add("_hold"),setTimeout((()=>{document.querySelector(".game__button-jump").classList.remove("_hold")}),550),clearInterval(d.timerCheckGameOver),setTimeout((()=>{S()}),700),setTimeout((()=>{q()}),750)),c.closest(".header__button-pause")&&(h(),setTimeout((()=>{document.querySelector(".timer").classList.remove("_active"),document.querySelector(".wrapper").classList.remove("_anim-bg"),document.querySelector(".game__hero").classList.remove("_active")}),50),document.querySelector(".pause").classList.add("_active"),document.querySelector(".box-training__count-stars").textContent=d.stars),c.closest(".button-restart")&&(d.count_win=0,d.loose=!1,d.stars=0,document.querySelector(".game__ground")&&document.querySelectorAll(".game__ground").forEach((e=>e.remove())),document.querySelector(".box-training__count-stars").textContent=d.stars,document.querySelector(".stars-header__value").textContent=d.stars,document.querySelector(".game__hero").classList.remove("_hide"),document.querySelector(".game__hero").classList.remove("_active"),document.querySelector(".game__hero").classList.remove("_jump-down"),document.querySelector(".wrapper").classList.remove("_anim-bg"),document.querySelector(".game__icon").classList.remove("_anim"),document.querySelector(".game__button-jump").classList.add("_hold"),document.querySelector(".timer").classList.remove("_active"),document.querySelector(".pause").classList.remove("_active"),document.querySelector(".gameover").classList.remove("_active"),setTimeout((()=>{b()}),10))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();