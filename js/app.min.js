(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".main")&&(+sessionStorage.getItem("money")>=50?(document.querySelector(".block-bet__coins").textContent=50,sessionStorage.setItem("current-bet",50)):(document.querySelector(".block-bet__coins").textContent=0,sessionStorage.setItem("current-bet",0)));const t=document.querySelector(".preloader"),s=document.querySelector(".wrapper");function o(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.contains(t)&&e.classList.remove(t)}))}function n(e,t){let s=+sessionStorage.getItem("money");sessionStorage.setItem("money",s-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function c(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function r(e,t){return Math.floor(Math.random()*(t-e)+e)}let i=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=r(0,3),t=["jump","scale","rotate"],s=r(0,i.length);i.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{i[s].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4);const a={program:1},m=1e5,l=2e5;function d(){document.querySelectorAll(".pets__item").forEach((e=>{e.classList.contains("_selected")&&e.classList.remove("_selected")}));let e=+sessionStorage.getItem("current-pet")-1;document.querySelectorAll(".pets__item")[e].classList.add("_selected"),0==e?(document.querySelector(".main__image-chick img").setAttribute("src","img/other/chick.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(-180deg)"):1==e?(document.querySelector(".main__image-chick img").setAttribute("src","img/other/wolf.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(0deg)"):2==e&&(document.querySelector(".main__image-chick img").setAttribute("src","img/other/fairy.png"),document.querySelector(".main__image-chick img").style.transform="rotateY(0deg)")}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),sessionStorage.getItem("training-complete")&&(document.querySelector(".training").remove(),document.querySelector(".main").classList.remove("_hide"))),document.querySelector(".main")&&(sessionStorage.getItem("current-pet")||sessionStorage.setItem("current-pet",1),sessionStorage.getItem("pet")||sessionStorage.setItem("pet",1),d());const u={hero:document.querySelector(".game__hero"),pin_2:document.querySelector(".pins__pin_middle"),pin_3:document.querySelector(".pins__pin_end")};document.querySelector(".game");setInterval((()=>{let e=function(){let e=document.querySelector(".pin_2"),t=e.getBoundingClientRect().left-3,s=e.getBoundingClientRect().top-3;return document.elementFromPoint(t,s)}();console.log(`ground - ${e}`),e.classList.contains(".game__ground")}),20);document.addEventListener("click",(e=>{let r=e.target,i=+sessionStorage.getItem("current-bet"),_=+sessionStorage.getItem("money");if(r.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),s.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active")),r.closest(".block-bet__minus")&&i>50&&(sessionStorage.setItem("current-bet",i-50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),r.closest(".block-bet__plus")&&(_-49>i?(sessionStorage.setItem("current-bet",i+50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),r.closest(".block-bet__min")&&(+sessionStorage.getItem("money")>=50?(sessionStorage.setItem("current-bet",50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),r.closest(".block-bet__max")&&(+sessionStorage.getItem("money")>=50?(sessionStorage.setItem("current-bet",+sessionStorage.getItem("money")),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):c(".check")),r.closest(".box-training__button")&&1==a.program&&document.querySelector(".training")){setTimeout((()=>{a.program=2}),100),document.querySelector(".box-training__bg-text").textContent="pet",document.querySelector(".item-training__text p").textContent="Animals can be bought for coins",document.querySelector(".block-bet").remove();let e=function(){let e=document.createElement("div");e.classList.add("box-training__pets"),e.classList.add("pets");let t=document.createElement("div");t.classList.add("pets__body");let s=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div");s.classList.add("pets__item"),o.classList.add("pets__item"),n.classList.add("pets__item"),o.classList.add("_hide"),n.classList.add("_hide");let c=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div");c.classList.add("pets__item-body"),r.classList.add("pets__item-body"),i.classList.add("pets__item-body");let a=document.createElement("div"),m=document.createElement("div"),l=document.createElement("div");a.classList.add("pets__image"),m.classList.add("pets__image"),l.classList.add("pets__image");let d=document.createElement("img"),u=document.createElement("img"),_=document.createElement("img");d.setAttribute("src","img/other/chick.png"),u.setAttribute("src","img/other/wolf.png"),_.setAttribute("src","img/other/fairy.png"),a.append(d),m.append(u),l.append(_);let g=document.createElement("div"),p=document.createElement("div"),S=document.createElement("div");g.classList.add("pets__coeff"),p.classList.add("pets__coeff"),S.classList.add("pets__coeff"),g.textContent="x1.5",p.textContent="x1.8",S.textContent="x2.0";let y=document.createElement("div"),b=document.createElement("div"),L=document.createElement("div");y.classList.add("pets__icon"),b.classList.add("pets__icon"),L.classList.add("pets__icon");let h=document.createElement("img"),q=document.createElement("img"),v=document.createElement("img");h.setAttribute("src","img/icons/btn-ok.png"),q.setAttribute("src","img/icons/btn-ok.png"),v.setAttribute("src","img/icons/btn-ok.png"),y.append(h),b.append(q),L.append(v);let I=document.createElement("div"),x=document.createElement("div");I.classList.add("pets__text"),x.classList.add("pets__text"),I.classList.add("_hide"),x.classList.add("_hide"),I.textContent="Collect 200 stars\tin one game",x.textContent="Collect 400 stars\tin one game";let E=document.createElement("div"),f=document.createElement("div");E.classList.add("pets__sub-text"),E.classList.add("pets__sub-text_training"),f.classList.add("pets__sub-text"),f.classList.add("pets__sub-text_training");let k=document.createElement("img"),A=document.createElement("img");k.setAttribute("src","img/icons/coin.png"),A.setAttribute("src","img/icons/coin.png");let C=document.createElement("div"),w=document.createElement("div");return C.classList.add("pets__price"),w.classList.add("pets__price"),C.textContent="100k",w.textContent="200k",E.append(k,C),f.append(A,w),c.append(a,g,y),r.append(m,p,b,E,I),i.append(l,S,L,f,x),s.append(c),o.append(r),n.append(i),t.append(s,o,n),e.append(t),e}();document.querySelector(".box-training__image").append(e)}r.closest(".box-training__button")&&2==a.program&&document.querySelector(".training")&&(setTimeout((()=>{a.program=3}),100),document.querySelector(".item-training__text p").textContent="To get more pets - complete tasks",document.querySelectorAll(".pets__sub-text_training").forEach((e=>e.remove())),document.querySelectorAll(".pets__text").forEach((e=>{e.classList.contains("_hide")&&e.classList.remove("_hide")}))),r.closest(".box-training__button")&&3==a.program&&document.querySelector(".training")&&(document.querySelector(".control-training__button-jump").classList.add("_active"),document.querySelector(".character-training__body").classList.add("_active"),document.querySelector(".item-training__body").remove()),r.closest(".character-training__button")&&(sessionStorage.setItem("training-complete",!0),document.querySelector(".training").classList.add("_anim"),document.querySelector(".main").classList.remove("_hide"),a.program=1,setTimeout((()=>{document.querySelector(".training").remove()}),2e3)),r.closest(".control-training__button-jump")&&document.querySelector(".control-training__button-jump").classList.contains("_active")&&document.querySelector(".control-training__button-jump").classList.remove("_active"),r.closest(".button-pets")&&(document.querySelector(".button-pets").classList.add("_hide"),document.querySelector(".box-training__bg-text").textContent="pet",document.querySelector(".block-bet").classList.add("_hide"),document.querySelector(".pets").classList.remove("_hide"),document.querySelector(".box-training__button-back").classList.remove("_hide"),d(),sessionStorage.getItem("character-2")&&document.querySelectorAll(".pets__item")[1].classList.remove("_hide"),sessionStorage.getItem("character-3")&&document.querySelectorAll(".pets__item")[2].classList.remove("_hide")),r.closest(".box-training__button-back")&&(document.querySelector(".box-training__button-back").classList.add("_hide"),document.querySelector(".pets").classList.add("_hide"),document.querySelector(".block-bet").classList.remove("_hide"),document.querySelector(".box-training__bg-text").textContent="bet",document.querySelector(".button-pets").classList.remove("_hide")),r.closest(".pets__item")&&1==r.closest(".pets__item").dataset.character&&(o(".pets__item","_active"),r.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",1)),r.closest(".pets__item")&&2==r.closest(".pets__item").dataset.character&&(sessionStorage.getItem("character-2")?(o(".pets__item","_active"),r.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",2)):+sessionStorage.getItem("money")>=m?(n(m,".check"),sessionStorage.setItem("character-2",!0),r.closest(".pets__item").classList.remove("_hide")):+sessionStorage.getItem("money")<m&&c(".check")),r.closest(".pets__item")&&3==r.closest(".pets__item").dataset.character&&(sessionStorage.getItem("character-3")?(o(".pets__item","_active"),r.closest(".pets__item").classList.add("_active"),sessionStorage.setItem("pet",3)):+sessionStorage.getItem("money")>=l?(n(l,".check"),sessionStorage.setItem("character-3",!0),r.closest(".pets__item").classList.remove("_hide")):+sessionStorage.getItem("money")<l&&c(".check")),r.closest(".box-training__button-ok")&&!document.querySelector(".training")&&document.querySelector(".main__button-pets").classList.contains("_hide")&&(sessionStorage.setItem("current-pet",sessionStorage.getItem("pet")),d()),!r.closest(".box-training__button-ok")||document.querySelector(".training")||document.querySelector(".main__button-pets").classList.contains("_hide")||(document.querySelector(".main").classList.add("_hide"),document.querySelector(".game").classList.remove("_hide")),r.closest(".game__button-jump")&&function(){let e=0;const t=document.querySelector(".game__hero"),s=window.getComputedStyle(t),o=parseInt(s.bottom,10);let n=setInterval((()=>{e+=3,u.hero.style.bottom=`${o+e}px`,e>=51&&clearInterval(n)}),10);setTimeout((()=>{e=0;let t=setInterval((()=>{e+=3,u.hero.style.bottom=o+50-e+"px",e>=51&&(u.hero.style.bottom=`${o}px`,clearInterval(t))}),10)}),250),document.querySelector(".game__button-jump").classList.add("_hold"),setTimeout((()=>{document.querySelector(".game__button-jump").classList.remove("_hold")}),550)}()})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();